<!DOCTYPE html>
<html>
<head>
    <title>Background Remover</title>
    <style>
        /* Reset & Base Styling */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(120deg, #1d2671, #c33764);
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            color: white;
            flex-direction: column;
            text-align: center;
        }

        h1 {
            font-size: 2.5rem;
            margin-bottom: 20px;
            text-shadow: 0 4px 10px rgba(0,0,0,0.3);
            animation: fadeInDown 1s ease-out;
        }

        /* Form Container */
        form {
            background: rgba(255, 255, 255, 0.1);
            padding: 40px;
            border-radius: 15px;
            backdrop-filter: blur(15px);
            box-shadow: 0 8px 30px rgba(0,0,0,0.4);
            display: flex;
            flex-direction: column;
            align-items: center;
            animation: fadeInUp 1.2s ease-out;
        }

        /* File Input */
        input[type="file"] {
            padding: 12px;
            margin-bottom: 20px;
            border: none;
            border-radius: 8px;
            background: white;
            color: black;
            font-size: 1rem;
            cursor: pointer;
            width: 100%;
            max-width: 280px;
        }

        input[type="file"]::-webkit-file-upload-button {
            background: #673ab7;
            color: white;
            border: none;
            padding: 10px 15px;
            border-radius: 5px;
            cursor: pointer;
            transition: 0.3s;
        }

        input[type="file"]::-webkit-file-upload-button:hover {
            background: #5e35b1;
        }

        /* Button */
        button {
            background: linear-gradient(45deg, #ff6f00, #ff8f00);
            border: none;
            color: white;
            padding: 12px 25px;
            font-size: 1rem;
            border-radius: 8px;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
            box-shadow: 0 4px 15px rgba(0,0,0,0.3);
            margin-top: 10px;
        }

        button:hover {
            transform: scale(1.05);
            box-shadow: 0 6px 20px rgba(0,0,0,0.4);
        }

        /* Preview Image */
        img {
            max-width: 400px;
            margin-top: 20px;
            border: 2px solid white;
            border-radius: 10px;
            display: none;
        }

        /* Animations */
        @keyframes fadeInDown {
            from { opacity: 0; transform: translateY(-30px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @keyframes fadeInUp {
            from { opacity: 0; transform: translateY(30px); }
            to { opacity: 1; transform: translateY(0); }
        }
    </style>
</head>
<body>
    <h1>REMOVE BACKGROUND OF ANY IMAGE.</h1>
    <form id="uploadForm">
        <input type="file" name="image" accept="image/*" required>
        <button type="submit">Remove Background</button>
    </form>

    <h2 style="margin-top:20px;">Preview:</h2>
    <img id="preview" />
    <button id="downloadBtn" style="display:none; background:green;">Download Image</button>

    <script>
        let lastImageBase64 = null;

        document.getElementById('uploadForm').addEventListener('submit', async (e) => {
            e.preventDefault();
            const formData = new FormData(e.target);

            const res = await fetch('/remove-bg', {
                method: 'POST',
                body: formData
            });

            const data = await res.json();
            if (data.error) {
                alert('Error: ' + data.error);
                return;
            }

            lastImageBase64 = data.image;

            const imgElement = document.getElementById('preview');
            imgElement.src = 'data:image/png;base64,' + data.image;
            imgElement.style.display = 'block';

            document.getElementById('downloadBtn').style.display = 'inline-block';
        });

        document.getElementById('downloadBtn').addEventListener('click', () => {
            if (!lastImageBase64) return;
            const link = document.createElement('a');
            link.href = 'data:image/png;base64,' + lastImageBase64;
            link.download = 'output.png';
            link.click();
        });
    </script>
</body>
</html>
